# GWiki

**A LaTeX-based interconnected note system for mathematical writing.**

GWiki lets you write mathematical notes with the full power of LaTeX (including TikZ), while enjoying wiki-style cross-referencing between documents. Each note compiles to a standalone PDF with hyperlinked cross-references.

## Features

- **Full LaTeX Power**: All LaTeX features including TikZ diagrams, theorem environments, and custom macros
- **Wiki-Style Linking**: Cross-reference between notes using `\wref{note-name}`
- **Automatic Metadata**: File modification times tracked automatically
- **Tagging & Aliases**: Organize notes with tags and define multiple names per concept
- **Vault Index**: Comprehensive index showing all notes, tags, and aliases
- **Rich Environments**: Theorem, definition, example, and idea boxes with color-coded frames
- **Professional Styling**: Clean headers, footers, and fancyhdr layout

## Quick Start

### Create a New Note

```bash
make new NAME=category TITLE="Category Theory"
```

This creates `notes/category.tex` with the basic template.

### Edit Your Note

```latex
\documentclass{gwiki}

\Title{Category Theory}
\Tags{category-theory}{algebra}
\Aliases{categories, CT}
\Summary{Basic definitions for category theory.}

\begin{document}

\NoteHeader

\begin{framedidea}[Core Idea]
A category abstracts the concept of mathematical structure
and structure-preserving maps.
\end{framedidea}

\KeySources{\nlab{category}}

\begin{definition}[Category]
A \textbf{category} $\cC$ consists of...
\end{definition}

See also: \wref{functor}, \wref{natural-transformation}

\Footer

\end{document}
```

### Build Everything

```bash
make vault    # Build all notes + index → pdfs/
```

This generates:
- Individual PDFs in `build/pdf/`
- Complete vault in `pdfs/` (all notes + index)
- Comprehensive index showing all notes, tags, and aliases

## Commands

```bash
make              # Build all notes
make vault        # Build all notes + index → pdfs/
make index        # Generate and build vault index
make category     # Build single note
make new NAME=x   # Create new note
make watch        # Auto-rebuild on changes
make clean        # Remove build files
```

## Linking Between Notes

Use `\wref{note-name}` to link to other notes:

```latex
A \wref{functor} between \wref{category}[categories] preserves structure.
```

The optional second argument provides custom display text. All links open the corresponding PDF when clicked.

## Vault Index

The vault index (`index.tex`, generated by `make index`) provides:

- **Statistics**: Total notes, tags, and aliases
- **Alphabetical List**: All notes with summaries
- **Tag Organization**: Notes grouped by topic
- **Alias Directory**: Find alternate names for concepts

Use the index as your entry point to browse the entire vault.

## Note Structure

### Header (NoteHeader)
- Large sans-serif title
- Summary paragraph
- Clean separator line

### Body
- Your content (definitions, theorems, examples, etc.)
- Cross-references to other notes
- TikZ diagrams using `tz.sty` package

### Footer (Footer)
- Automatically shows: Created date, Last modified date, Tags
- Small, unobtrusive metadata

## Directory Structure

```
GWiki/
├── notes/              # Your notes (.tex files)
├── lib/                # LaTeX class and packages
│   ├── gwiki.cls       # Document class
│   ├── gwiki-links.sty # Cross-referencing system
│   ├── gwiki-macros.sty# Math macros
│   └── tz.sty          # TikZ extensions
├── scripts/            # Build scripts
│   └── generate-index.py  # Index generator
├── build/pdf/          # Build output
├── pdfs/               # Final vault (all PDFs)
├── index.tex           # Generated vault index
└── Makefile            # Build system
```

## Theorem Environments

Available environments (use `framed` prefix for colored boxes):

```latex
\begin{framedtheorem}[Name]
...
\end{framedtheorem}

\begin{framedidea}[Core Concept]
...
\end{framedidea}
```

Environments: `theorem`, `lemma`, `proposition`, `corollary`, `definition`, `example`, `remark`, `idea`, etc.

### Numbering defaults

Enunciations now share a single counter, so the first one you write is `Definition 1`, then `Lemma 2`, etc. To tie the main counter to sections, pass a class option (`\documentclass[maincounterparent=section]{gwiki}`) or call `\MainCounterWithin{section}` (or `subsection`, etc.) in the preamble.

## Bibliography System

GWiki includes a comprehensive BibTeX bibliography system with automatic PDF linking.

### Quick Start

1. **Enable bibliography** in your note:
   ```latex
   \documentclass[bibliography]{gwiki}
   ```

2. **Add references** to `references/references.bib`:
   ```bibtex
   @book{MacLane1978,
     author    = {Mac Lane, Saunders},
     title     = {Categories for the Working Mathematician},
     year      = {1978},
     publisher = {Springer},
   }
   ```

3. **Place PDFs** in `references/pdfs/`:
   - Filename should match BibTeX key: `MacLane1978.pdf`

4. **Cite in your notes**:
   ```latex
   \wcite{MacLane1978}           % [Mac78] - auto-links to PDF!
   \wcite[p. 42]{MacLane1978}    % [Mac78, p. 42]
   \wtextcite{MacLane1978}       % Mac Lane (1978)
   ```

5. **Print bibliography**:
   ```latex
   \References  % Automatically uses BibTeX when enabled
   ```

### Citation Commands

- `\wcite{key}` - Standard citation: `[Mac78]` (links to PDF if exists)
- `\wcite[p. 42]{key}` - With page number: `[Mac78, p. 42]`
- `\wcite[See][Ch. 5]{key}` - With prenote: `[See Mac78, Ch. 5]`
- `\wtextcite{key}` - Text citation: `Mac Lane (1978)`
- `\wparencite{key}` - Parenthetical: `(Mac Lane 1978)`
- `\wpdf{key}` - Direct PDF link (no citation)
- `\wfullcite{key}` - Full citation inline

### Features

- **Automatic PDF Linking**: Citations link directly to local PDFs
- **Hybrid System**: Works with both BibTeX entries and inline citations
- **Backref**: Bibliography shows which pages cite each reference
- **Flexible**: Disable bibliography option for simple notes

See `references/README.md` for complete documentation.

## External References (Non-BibTeX)

For quick references without BibTeX:

```latex
\arxiv{0601185}         % arXiv reference
\nlab{category}         % nLab reference
\wcite{Author23}        % Simple inline citation (no .bib needed)
\wcite[Ch. 5]{Book}     % Citation with location
```

## Key Sources

```latex
\KeySources{\nlab{category}, \arxiv{0601185}}
```

Place this near the top of a note (often after the Idea box). Entries are listed in a clean box and also recorded for `\References`.

All references added via `\KeySources`, `\arxiv`, `\nlab`, or `\wcite` automatically appear in the References section.

## Tags and Aliases

```latex
\Tags{algebra}{category-theory}    % Multiple tags
\Aliases{CT, categories, cats}     % Alternative names
```

Both formats work:
- `\Tags{tag1}{tag2}` (separate arguments)
- `\Tags{tag1, tag2}` (comma-separated)

## Customization

Edit `lib/gwiki.cls` and `lib/gwiki-links.sty` to customize:
- Colors and styling
- Header/footer format
- Date formatting
- Theorem environment colors

## Philosophy

GWiki is designed for:
- **Minimal friction**: Write math, not metadata
- **Permanent notes**: Each note is a standalone PDF
- **Interconnection**: Easy linking preserves context
- **Scalability**: Works for 10 or 1000 notes
- **Portability**: Just LaTeX + Make + Python

No database, no server, no complex dependencies. Just `.tex` files that compile to beautiful, interconnected PDFs.

---

**Start writing:** `make new NAME=my-first-note`
