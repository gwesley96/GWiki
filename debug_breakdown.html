<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Debug: Preamble Breakdown</title>
    <link rel="stylesheet" type="text/css" href="https://tikzjax.com/v1/fonts.css">
    <script src="https://tikzjax.com/v1/tikzjax.js"></script>
    <style>
        .test-case { border: 1px solid #ccc; margin: 20px; padding: 10px; }
        .label { font-weight: bold; }
    </style>
</head>
<body>
    <h1>Preamble Breakdown Tests</h1>

    <div class="test-case">
        <div class="label">1. Patterns (\pgfdeclarepatternformonly)</div>
        <script type="text/tikz">
            \usetikzlibrary{patterns}
            \pgfdeclarepatternformonly{primeddots}{\pgfqpoint{-1pt}{-1pt}}{\pgfqpoint{5pt}{5pt}}{\pgfqpoint{4pt}{4pt}}%
            {
              \pgfpathcircle{\pgfqpoint{0pt}{0pt}}{.5pt}
              \pgfusepath{fill}
            }
            \begin{tikzpicture}
                \fill[pattern=primeddots] (0,0) rectangle (1,1);
            \end{tikzpicture}
        </script>
    </div>

    <div class="test-case">
        <div class="label">2. Styles & Decorations (arrow at)</div>
        <script type="text/tikz">
            \usetikzlibrary{decorations.markings}
            \tikzset{
                arrow at/.style={decoration={markings, mark=at position #1 with {\arrow{>}}}, postaction={decorate}},
                arrow at/.default=0.5
            }
            \begin{tikzpicture}
                \draw[arrow at=0.5] (0,0) -- (2,0);
            \end{tikzpicture}
        </script>
    </div>

    <div class="test-case">
        <div class="label">3. Commands (\newcommand)</div>
        <script type="text/tikz">
            \newcommand{\blt}[1]{\node[circle, fill, inner sep=1pt] at #1 {};}
            \begin{tikzpicture}
                \blt{(0,0)}
            \end{tikzpicture}
        </script>
    </div>
    
    <div class="test-case">
        <div class="label">4. Colors (\definecolor)</div>
        <script type="text/tikz">
             \definecolor{colA}{RGB}{200,50,50}
             \begin{tikzpicture}
                 \fill[colA] (0,0) circle (0.5cm);
             \end{tikzpicture}
        </script>
    </div>
</body>
</html>
