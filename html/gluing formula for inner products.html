<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gluing formula for inner products - GWiki</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=JetBrains+Mono:wght@400;500&family=Merriweather:ital,wght@0,300;0,400;0,700;1,400&display=swap" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="style.css">
    <link rel="stylesheet" type="text/css" href="https://tikzjax.com/v1/fonts.css">
    <script>
    window.MathJax = {
        tex: {
            inlineMath: [['$', '$']],
            displayMath: [['\\[', '\\]']],
            macros: {
                // Category theory
                cC: '\\mathcal{C}',
                cD: '\\mathcal{D}',
                cF: '\\mathcal{F}',
                cG: '\\mathcal{G}',
                cH: '\\mathcal{H}',
                cL: '\\mathcal{L}',
                cM: '\\mathcal{M}',
                cP: '\\mathcal{P}',
                cU: '\\mathcal{U}',
                Obj: '\\operatorname{Obj}',
                Hom: '\\operatorname{Hom}',
                Mor: '\\operatorname{Mor}',
                End: '\\operatorname{End}',
                Aut: '\\operatorname{Aut}',
                id: '\\mathrm{id}',

                // Blackboard bold
                bR: '\\mathbb{R}',
                bC: '\\mathbb{C}',
                bZ: '\\mathbb{Z}',
                bN: '\\mathbb{N}',
                bQ: '\\mathbb{Q}',
                bbR: '\\mathbb{R}',
                bbC: '\\mathbb{C}',
                bbZ: '\\mathbb{Z}',
                bbN: '\\mathbb{N}',
                bbQ: '\\mathbb{Q}',

                // Delimiters
                bkt: ['\\langle #1 \\middle| #2 \\rangle', 2],
                abs: ['\\left| #1 \\right|', 1],
                norm: ['\\left\\| #1 \\right\\|', 1],

                // Categories
                Set: '\\mathbf{Set}',
                Grp: '\\mathbf{Grp}',
                Top: '\\mathbf{Top}',
                Vec: '\\mathbf{Vec}',

                // Operators
                colim: '\\operatorname{colim}',
                Ext: '\\operatorname{Ext}',
                Tor: '\\operatorname{Tor}',
                Spec: '\\operatorname{Spec}',
                im: '\\operatorname{im}',
                coker: '\\operatorname{coker}',
                coloneqq: '\\mathrel{\\vcenter{:}}=',
                coloneq: '\\mathrel{\\vcenter{:}}=',

                // TikZ-like (limited in HTML)
                to: '\\rightarrow',
                injto: '\\hookrightarrow',
                surjto: '\\twoheadrightarrow'
            }
        }
    };
    </script>
    <script src="https://tikzjax.com/v1/tikzjax.js"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</head>
<body>
    <div class="top-nav">
        <div class="nav-left">
            <a href="../index.html" class="nav-link">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M19 12H5M12 19l-7-7 7-7"/>
                </svg>
                <span>Index</span>
            </a>
        </div>
        <div class="nav-right">
            <a href="../pdfs/gluing formula for inner products.pdf" class="nav-btn" title="View PDF">
                <span>PDF</span>
            </a>
            <a href="file:///Users/greysonwesley/Desktop/workflow/wiki/gluing formula for inner products.md" class="nav-btn" title="Edit in Obsidian">
                <span>MD</span>
            </a>
        </div>
    </div>
    <div class="content-wrapper">
    <h1>Gluing formula for inner products</h1>
    <div class="metadata">
        <strong>Last modified:</strong> December 11, 2025 at  8:25 PM ET<br>
        <strong>Created:</strong> ?<br>
        <strong>Tags:</strong> TQFT, unitary-TQFT, gluing
    </div>
    <div class="content">
        
        <div class="env-box lemma">
<p><strong>Lemma (Gluing formula for inner products).</strong> Let $(\mathcal{F}, \mathcal{U}, z)$ be an $(n{+}1)$-dimensional unitary TQFT. Suppose $X \in \mathcal{M}_n$ has boundary \[ \partial X = (\overline{Y} \sqcup Y)_{\overline{\partial Y} \sqcup \partial Y} \cup Q \] for $Y, Q \in \mathcal{M}_{n-1}$. Fix $d \in \mathcal{F}(\partial Y)$, $q \in \mathcal{F}(Q; \overline{d} \sqcup d)$, and $y \in \mathcal{F}(Y, d)$. Then for $f, f' \in \mathcal{A}(X, (\overline{y} \sqcup y) \bullet q)$, \[ \langle f_{\mathrm{gl}}, f'_{\mathrm{gl}} \rangle_{X_{\mathrm{gl}}, q_{\mathrm{gl}}} = \sum_{s \in \mathrm{Irr}} \sum_{k=1}^{n_s} \frac{\langle f \cup e_s^{(k)}, f' \cup e_s^{(k)} \rangle_{X, (\overline{y} \sqcup y) \bullet q}}{\langle e_s^{(k)}, e_s^{(k)} \rangle_{Y \times I, \overline{y} \sqcup y}}, \] where $\mathrm{Irr} = \mathrm{Irr}(\mathsf{Rep}(\mathrm{End}_{\mathcal{A}(Y,d)}(y)))$, and $\{e_s^{(k)}\}$ is a complete set of orthogonal minimal idempotents for the unitary algebra $\mathrm{End}_{\mathcal{A}(Y,d)}(y)$.</p>
</div>

<div class="env-box proof">
<p><strong>Proof.</strong></p>
<ul>
<li><strong>Setup and notation.</strong> The gluing $X_{\mathrm{gl}}$ is obtained by identifying the copy of $\overline{Y}$ in $\partial X$ with the copy of $Y$, yielding $\partial X_{\mathrm{gl}} = Q_{\mathrm{gl}}$. After gluing, the field $(\overline{y} \sqcup y) \bullet q$ on $\partial X$ descends to the glued field $q_{\mathrm{gl}}$ on $\partial X_{\mathrm{gl}}$. For any $n$-manifold $M$ with boundary conditions $c$, the inner product on $\mathcal{A}(M;c)$ is defined by the path integral of the cylinder (<a href="WalkerTQFTnotes06.html">Walker06, 6.2.1</a>)
<p>\[ \langle x, y \rangle_{M,c} = Z(M \times I)(\overline{x} \cup y), \] where $\overline{x}$ is the conjugated field on $\overline{M} = M \times \{0\}$ and $y$ sits on $M \times \{1\}$. The cylinder category $\mathcal{A}(Y;d)$ has objects $\mathcal{C}(Y;d)$ and morphisms $\mathcal{A}(Y;d)^1_{ab} = \mathcal{A}(Y \times I; \overline{a}, b)$. Composition is given by stacking cylinders. In particular, the endomorphism space \[ \mathrm{End}_{\mathcal{A}(Y,d)}(y) \coloneqq \mathcal{A}(Y \times I; \overline{y}, y) \] is an associative algebra under composition.</li></p>
<li><strong>Step 1. Applying the gluing formula to $X_{\mathrm{gl}} \times I$.</strong> To compute $\langle f_{\mathrm{gl}}, f'_{\mathrm{gl}} \rangle_{X_{\mathrm{gl}}}$, we evaluate
<p>\[ \langle f_{\mathrm{gl}}, f'_{\mathrm{gl}} \rangle = Z(X_{\mathrm{gl}} \times I)(\overline{f}_{\mathrm{gl}} \bullet f'_{\mathrm{gl}}). \] The manifold $X_{\mathrm{gl}} \times I$ is itself obtained by gluing $(X \times I)$ along the cylinder $Y \times I$ (since $(X \times I)_{\mathrm{gl}} = X_{\mathrm{gl}} \times I$). Applying the gluing formula <a href="WalkerTQFTnotes06.html">Walker, (6.1.9)</a> for an orthogonal basis $\{e_i\}$ of the gluing locus $\mathcal{A}(Y \times I; \overline{y}, y)$, \[ Z(X_{\mathrm{gl}} \times I)(\overline{f}_{\mathrm{gl}} \bullet f'_{\mathrm{gl}}) = \sum_i \frac{Z(X \times I)\bigl((\overline{f} \cup \overline{e}_i) \bullet (f' \cup e_i)\bigr)}{\langle e_i, e_i \rangle_{Y \times I}}. \] The numerator simplifies using compatibility of conjugation with $\cup$ via \[ Z(X \times I)\bigl((\overline{f} \cup \overline{e}_i) \bullet (f' \cup e_i)\bigr) = Z(X \times I)\bigl(\overline{f \cup e_i} \bullet (f' \cup e_i)\bigr) = \langle f \cup e_i, f' \cup e_i \rangle_X. \] Thus \[ \langle f_{\mathrm{gl}}, f'_{\mathrm{gl}} \rangle = \sum_i \frac{\langle f \cup e_i, f' \cup e_i \rangle_X}{\langle e_i, e_i \rangle_{Y \times I}}, \] for any orthogonal basis $\{e_i\}$ of $\mathrm{End}_{\mathcal{A}(Y,d)}(y)$.</li></p>
<li><strong>Step 2. Structure of the endomorphism algebra.</strong> The algebra $E \coloneqq \mathrm{End}_{\mathcal{A}(Y,d)}(y)$ is finite-dimensional. It carries an inner product from the cylinder $\langle e, e' \rangle = Z(Y \times I \times I)(\overline{e} \bullet e')$, making it a <em>unitary algebra</em> (the inner product is compatible with the $*$-structure given by conjugation). By semisimplicity (a consequence of unitarity and finite-dimensionality), $E$ decomposes as a direct sum of matrix algebras
<p>\[ E \cong \bigoplus_{s \in \mathrm{Irr}} M_{n_s}(\mathbb{C}), \] where $\mathrm{Irr}$ indexes the simple modules and $n_s = \dim(s)$. A unitary semisimple algebra admits a complete set of <em>orthogonal minimal idempotents</em> $\{e_s^{(k)}\}$, for $s \in \mathrm{Irr}$ and $k = 1, \ldots, n_s$. These satisfy the multimatrix unit relations \[ e_s^{(k)} \circ e_t^{(\ell)} = \delta_{st}\delta_{k\ell}\, e_s^{(k)}. \]</li></p>
<li><strong>Step 3. The minimal idempotents form an orthogonal basis.</strong> We verify that $\{e_s^{(k)}\}$ is orthogonal with respect to $\langle \cdot, \cdot \rangle_{Y \times I}$. The inner product on $E = \mathcal{A}(Y \times I; \overline{y}, y)$ satisfies the <em>trace property</em> (Walker [6.2.4])
<p>\[ \langle e \circ e', e'' \rangle = \langle e, e'' \circ (e')^* \rangle \] for composable morphisms, where $(-)^*$ is the conjugate-adjoint. For idempotents, $e^* = e$ (they are self-adjoint projections in a unitary algebra). Computing for two idempotents \[ \langle e_s^{(k)}, e_t^{(\ell)} \rangle = \langle e_s^{(k)} \circ e_t^{(\ell)}, \mathrm{id}_y \rangle = \delta_{st}\delta_{k\ell}\, \langle e_s^{(k)}, \mathrm{id}_y \rangle. \] When $(s,k) \neq (t,\ell)$, the idempotent relation gives $e_s^{(k)} \circ e_t^{(\ell)} = 0$, so $\langle e_s^{(k)}, e_t^{(\ell)} \rangle = 0$. When $(s,k) = (t,\ell)$, positive-definiteness of the inner product gives $\langle e_s^{(k)}, e_s^{(k)} \rangle > 0$. Thus $\{e_s^{(k)}\}_{s,k}$ is indeed an orthogonal basis of $E$.</li></p>
<li><strong>Step 4. Conclusion.</strong> Substituting the orthogonal basis $\{e_s^{(k)}\}$ into the formula from <strong>Step 1</strong>,
<p>\[ \langle f_{\mathrm{gl}}, f'_{\mathrm{gl}} \rangle_{X_{\mathrm{gl}}, q_{\mathrm{gl}}} = \sum_{s \in \mathrm{Irr}} \sum_{k=1}^{n_s} \frac{\langle f \cup e_s^{(k)}, f' \cup e_s^{(k)} \rangle_{X, (\overline{y} \sqcup y) \bullet q}}{\langle e_s^{(k)}, e_s^{(k)} \rangle_{Y \times I, \overline{y} \sqcup y}}. \]</li></p>
</ul>
</div>

<div class="env-box remark">
<p><strong>Remark (Simple case).</strong> When $y$ is <em>simple</em>, meaning $\mathrm{End}(y) \cong \mathbb{C}$, there is a unique minimal idempotent $e = \mathrm{id}_y$, and the formula becomes \[ \langle f_{\mathrm{gl}}, f'_{\mathrm{gl}} \rangle = \frac{\langle f, f' \rangle_X}{\langle \mathrm{id}_y, \mathrm{id}_y \rangle_{Y \times I}} = \frac{\langle f, f' \rangle_X}{d_y}, \] where $d_y = \langle \mathrm{id}_y, \mathrm{id}_y \rangle$ is the quantum dimension.</p>
</div>

<div class="see-also"><strong>See also:</strong> <a href="next.html">Next</a></div>
    </div>

    <div class="linked-notes">
        <h2>Linked Notes</h2>
        <ul>
            <li><a href="WalkerTQFTnotes06.html">WalkerTQFTnotes06</a></li>
        </ul>
    </div>
    </div>
</body>
</html>
